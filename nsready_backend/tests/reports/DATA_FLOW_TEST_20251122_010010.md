# Data Flow Test Report

**Date**: Sat Nov 22 01:00:10 IST 2025
**Environment**: docker
**Test**: Dashboard Input → NSReady Ingestion → Database → SCADA Export

---

## Test Steps

ab46b95e2ae4   ntppl_nsready_platform-admin_tool          "uvicorn app:app --h…"   25 minutes ago   Up 25 minutes   0.0.0.0:8000->8000/tcp, [::]:8000->8000/tcp                                                                                 admin_tool
5f5a66c55c29   traefik:v2.10                              "/entrypoint.sh --ap…"   3 days ago       Up 41 hours     0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp, 0.0.0.0:8080->8080/tcp, [::]:8080->8080/tcp   nsready_traefik
eb60d28f0729   ntppl_nsready_platform-collector_service   "uvicorn app:app --h…"   3 days ago       Up 41 hours     0.0.0.0:8001->8001/tcp, [::]:8001->8001/tcp                                                                                 collector_service
35c59ae87944   ntppl_nsready_platform-db                  "docker-entrypoint.s…"   3 days ago       Up 41 hours     0.0.0.0:5432->5432/tcp, [::]:5432->5432/tcp                                                                                 nsready_db
be9cf6008296   nats:2.10-alpine                           "docker-entrypoint.s…"   3 days ago       Up 41 hours     0.0.0.0:4222->4222/tcp, [::]:4222->4222/tcp, 0.0.0.0:8222->8222/tcp, [::]:8222->8222/tcp                                    nsready_nats
Collector health: {"service":"ok","queue_depth":0,"db":"connected","queue":{"consumer":"ingest_workers","pending":0,"ack_pending":0,"redelivered":2,"waiting_pulls":4}}

---

Auto-detected:
- project_id: 4360b675-5135-435d-b281-93a551a3986d
- site_id:    11cede34-1e6a-47f2-b7b2-8fc4634a760a
- device_id:  33333333-3333-3333-3333-333333333333
- parameters: project:4360b675-5135-435d-b281-93a551a3986d:voltage,project:4360b675-5135-435d-b281-93a551a3986d:current,project:4360b675-5135-435d-b281-93a551a3986d:power

---

Test event created: tmp_dataflow_event_20251122_010010.json

---

Rows before: 7
Ingest response: {"status":"queued","trace_id":"ab0a61b9-ff7e-4c31-9528-a7dc83695031"}
✅ Step 1: Dashboard input accepted

---

  queue_depth=1
  queue_depth=0
✅ Step 2: Queue drained

---

Rows after:  10
✅ Step 3: Data stored in database
Latest data: 33333333-3333-3333-3333-333333333333	project:4360b675-5135-435d-b281-93a551a3986d:voltage	51	2025-11-21 19:30:11+00

---

✅ Step 4: v_scada_latest contains data
✅ Step 4: v_scada_history contains data
SCADA sample: 33333333-3333-3333-3333-333333333333	project:4360b675-5135-435d-b281-93a551a3986d:current	31	2025-11-21 19:30:11+00

---

✅ Step 5: SCADA export successful
Export file: scada_export_test_20251122_010010.txt

---


## Summary

**Test Status**: ✅ **PASSED** (Data flow working correctly)

**Steps Completed**:
1. ✅ Dashboard input sent to /v1/ingest
2. ✅ Queue drained (events processed)
3. ✅ Data stored in database
4. ✅ Data visible in SCADA views
5. ✅ SCADA export tested (if available)

**Data Flow**: Dashboard Input → NSReady Ingestion → Database → SCADA Export

---

**Report generated**: Sat Nov 22 01:00:13 IST 2025
